{
   "$defs": {
      "AnalysisProcess": {
         "additionalProperties": false,
         "description": "Description of an Analysis",
         "properties": {
            "name": {
               "$ref": "#/$defs/ProcessName",
               "default": "Analysis",
               "title": "Process name"
            },
            "software_version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Version of the software used",
               "title": "Version"
            },
            "start_date_time": {
               "format": "date-time",
               "title": "Start date time",
               "type": "string"
            },
            "end_date_time": {
               "format": "date-time",
               "title": "End date time",
               "type": "string"
            },
            "input_location": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "items": {
                        "type": "string"
                     },
                     "type": "array"
                  }
               ],
               "description": "Path(s) to data inputs",
               "title": "Input location"
            },
            "output_location": {
               "description": "Path to data outputs",
               "title": "Output location",
               "type": "string"
            },
            "code_url": {
               "description": "Path to code repository",
               "title": "Code URL",
               "type": "string"
            },
            "code_version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Version of the code",
               "title": "Code version"
            },
            "parameters": {
               "$ref": "#/$defs/GenericModel",
               "default": {},
               "title": "Parameters"
            },
            "outputs": {
               "$ref": "#/$defs/GenericModel",
               "default": {},
               "description": "Output parameters",
               "title": "Outputs"
            },
            "notes": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Notes"
            },
            "resources": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/ResourceUsage"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Process resource usage"
            },
            "experimenters": {
               "description": "experimenters responsible for analysis",
               "items": {
                  "$ref": "#/$defs/Person"
               },
               "title": "experimenters",
               "type": "array"
            },
            "description": {
               "title": "Analysis Description",
               "type": "string"
            }
         },
         "required": [
            "start_date_time",
            "end_date_time",
            "input_location",
            "output_location",
            "code_url",
            "experimenters",
            "description"
         ],
         "title": "AnalysisProcess",
         "type": "object"
      },
      "DataProcess": {
         "additionalProperties": false,
         "description": "Description of a single processing step",
         "properties": {
            "name": {
               "$ref": "#/$defs/ProcessName",
               "title": "Name"
            },
            "software_version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Version of the software used",
               "title": "Version"
            },
            "start_date_time": {
               "format": "date-time",
               "title": "Start date time",
               "type": "string"
            },
            "end_date_time": {
               "format": "date-time",
               "title": "End date time",
               "type": "string"
            },
            "input_location": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "items": {
                        "type": "string"
                     },
                     "type": "array"
                  }
               ],
               "description": "Path(s) to data inputs",
               "title": "Input location"
            },
            "output_location": {
               "description": "Path to data outputs",
               "title": "Output location",
               "type": "string"
            },
            "code_url": {
               "description": "Path to code repository",
               "title": "Code URL",
               "type": "string"
            },
            "code_version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Version of the code",
               "title": "Code version"
            },
            "parameters": {
               "$ref": "#/$defs/GenericModel",
               "default": {},
               "title": "Parameters"
            },
            "outputs": {
               "$ref": "#/$defs/GenericModel",
               "default": {},
               "description": "Output parameters",
               "title": "Outputs"
            },
            "notes": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Notes"
            },
            "resources": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/ResourceUsage"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Process resource usage"
            }
         },
         "required": [
            "name",
            "start_date_time",
            "end_date_time",
            "input_location",
            "output_location",
            "code_url"
         ],
         "title": "DataProcess",
         "type": "object"
      },
      "GenericModel": {
         "additionalProperties": true,
         "description": "Base class for generic types that can be used in AIND schema",
         "properties": {},
         "title": "GenericModel",
         "type": "object"
      },
      "MemoryUnit": {
         "description": "Computer memory units",
         "enum": [
            "Byte",
            "Kilobyte",
            "Megabyte",
            "Gigabyte",
            "Terabyte",
            "Petabyte",
            "Exabyte"
         ],
         "title": "MemoryUnit",
         "type": "string"
      },
      "Person": {
         "description": "Person identifier",
         "properties": {
            "name": {
               "description": "First and last name OR anonymous ID",
               "title": "Person's name",
               "type": "string"
            },
            "registry": {
               "$ref": "#/$defs/_Orcid",
               "title": "Registry"
            },
            "registry_identifier": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "ORCID ID"
            }
         },
         "required": [
            "name"
         ],
         "title": "Person",
         "type": "object"
      },
      "PipelineProcess": {
         "additionalProperties": false,
         "description": "Description of a Processing Pipeline",
         "properties": {
            "data_processes": {
               "items": {
                  "$ref": "#/$defs/DataProcess"
               },
               "title": "Data processing",
               "type": "array"
            },
            "experimenters": {
               "description": "experimenters responsible for processing pipeline",
               "items": {
                  "$ref": "#/$defs/Person"
               },
               "title": "experimenters",
               "type": "array"
            },
            "pipeline_version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Version of the pipeline",
               "title": "Pipeline version"
            },
            "pipeline_url": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "URL to the pipeline code",
               "title": "Pipeline URL"
            },
            "note": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Notes"
            }
         },
         "required": [
            "data_processes",
            "experimenters"
         ],
         "title": "PipelineProcess",
         "type": "object"
      },
      "ProcessName": {
         "description": "Process names",
         "enum": [
            "Analysis",
            "Compression",
            "Denoising",
            "dF/F estimation",
            "Ephys curation",
            "Ephys postprocessing",
            "Ephys preprocessing",
            "Ephys visualization",
            "Fiducial segmentation",
            "File format conversion",
            "Fluorescence event detection",
            "Image atlas alignment",
            "Image background subtraction",
            "Image cell classification",
            "Image cell quantification",
            "Image cell segmentation",
            "Image cross-image alignment",
            "Image destriping",
            "Image flat-field correction",
            "Image importing",
            "Image mip visualization",
            "Image thresholding",
            "Image tile alignment",
            "Image tile fusing",
            "Image tile projection",
            "Image spot detection",
            "Image spot spectral unmixing",
            "Model evaluation",
            "Model training",
            "Neuropil subtraction",
            "Other",
            "Simulation",
            "Skull stripping",
            "Spatial timeseries demixing",
            "Spike sorting",
            "Video motion correction",
            "Video plane decrosstalk",
            "Video ROI classification",
            "Video ROI cross session matching",
            "Video ROI segmentation",
            "Video ROI timeseries extraction"
         ],
         "title": "ProcessName",
         "type": "string"
      },
      "ResourceTimestamped": {
         "additionalProperties": false,
         "description": "Description of resource usage at a moment in time",
         "properties": {
            "timestamp": {
               "format": "date-time",
               "title": "Timestamp",
               "type": "string"
            },
            "usage": {
               "title": "Usage",
               "type": "number"
            }
         },
         "required": [
            "timestamp",
            "usage"
         ],
         "title": "ResourceTimestamped",
         "type": "object"
      },
      "ResourceUsage": {
         "additionalProperties": false,
         "description": "Description of resources used by a process",
         "properties": {
            "os": {
               "title": "Operating system",
               "type": "string"
            },
            "architecture": {
               "title": "Architecture",
               "type": "string"
            },
            "cpu": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "CPU name"
            },
            "cpu_cores": {
               "anyOf": [
                  {
                     "type": "integer"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "CPU cores"
            },
            "gpu": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "GPU name"
            },
            "system_memory": {
               "anyOf": [
                  {
                     "type": "number"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "System memory"
            },
            "system_memory_unit": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/MemoryUnit"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "System memory unit"
            },
            "ram": {
               "anyOf": [
                  {
                     "type": "number"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "System RAM"
            },
            "ram_unit": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/MemoryUnit"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Ram unit"
            },
            "cpu_usage": {
               "anyOf": [
                  {
                     "items": {
                        "$ref": "#/$defs/ResourceTimestamped"
                     },
                     "type": "array"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "CPU usage"
            },
            "gpu_usage": {
               "anyOf": [
                  {
                     "items": {
                        "$ref": "#/$defs/ResourceTimestamped"
                     },
                     "type": "array"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "GPU usage"
            },
            "ram_usage": {
               "anyOf": [
                  {
                     "items": {
                        "$ref": "#/$defs/ResourceTimestamped"
                     },
                     "type": "array"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "RAM usage"
            },
            "usage_unit": {
               "default": "percent",
               "title": "Usage unit",
               "type": "string"
            }
         },
         "required": [
            "os",
            "architecture"
         ],
         "title": "ResourceUsage",
         "type": "object"
      },
      "_Orcid": {
         "additionalProperties": false,
         "description": "Model ORCID",
         "properties": {
            "name": {
               "const": "Open Researcher and Contributor ID",
               "default": "Open Researcher and Contributor ID",
               "title": "Name",
               "type": "string"
            },
            "abbreviation": {
               "const": "ORCID",
               "default": "ORCID",
               "title": "Abbreviation",
               "type": "string"
            }
         },
         "title": "_Orcid",
         "type": "object"
      }
   },
   "additionalProperties": false,
   "description": "Description of all processes run on data",
   "properties": {
      "describedBy": {
         "const": "https://raw.githubusercontent.com/AllenNeuralDynamics/aind-data-schema/main/src/aind_data_schema/core/processing.py",
         "default": "https://raw.githubusercontent.com/AllenNeuralDynamics/aind-data-schema/main/src/aind_data_schema/core/processing.py",
         "title": "Describedby",
         "type": "string"
      },
      "schema_version": {
         "const": "2.0.0",
         "default": "2.0.0",
         "title": "Schema Version",
         "type": "string"
      },
      "processing_pipeline": {
         "$ref": "#/$defs/PipelineProcess",
         "description": "Pipeline used to process data",
         "title": "Processing Pipeline"
      },
      "analyses": {
         "default": [],
         "description": "Analysis steps taken after processing",
         "items": {
            "$ref": "#/$defs/AnalysisProcess"
         },
         "title": "Analysis Steps",
         "type": "array"
      },
      "notes": {
         "anyOf": [
            {
               "type": "string"
            },
            {
               "type": "null"
            }
         ],
         "default": null,
         "title": "Notes"
      }
   },
   "required": [
      "processing_pipeline"
   ],
   "title": "Processing",
   "type": "object"
}