{
   "$defs": {
      "Code": {
         "additionalProperties": false,
         "description": "Code or script identifier",
         "properties": {
            "object_type": {
               "const": "Code",
               "default": "Code",
               "title": "Object Type",
               "type": "string"
            },
            "url": {
               "description": "Path to code repository",
               "title": "Code URL",
               "type": "string"
            },
            "version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Code version"
            },
            "software": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/Software"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Software package",
               "title": "Software"
            },
            "language": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Programming language used",
               "title": "Programming language"
            },
            "language_version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Programming language version"
            },
            "parameters": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/GenericModel"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Parameters used in the code or script",
               "title": "Parameters"
            }
         },
         "required": [
            "url"
         ],
         "title": "Code",
         "type": "object"
      },
      "DataProcess": {
         "additionalProperties": false,
         "description": "Description of a single processing step",
         "properties": {
            "object_type": {
               "const": "Data process",
               "default": "Data process",
               "title": "Object Type",
               "type": "string"
            },
            "name": {
               "$ref": "#/$defs/ProcessName",
               "title": "Name"
            },
            "stage": {
               "$ref": "#/$defs/ProcessStage",
               "title": "Processing stage"
            },
            "experimenters": {
               "description": "People responsible for processing",
               "items": {
                  "$ref": "#/$defs/Person"
               },
               "title": "experimenters",
               "type": "array"
            },
            "code": {
               "$ref": "#/$defs/Code",
               "title": "Code used for processing"
            },
            "pipeline_steps": {
               "anyOf": [
                  {
                     "items": {
                        "$ref": "#/$defs/ProcessName"
                     },
                     "type": "array"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": [
                  "For pipeline processes (ProcessName.PIPELINE), steps should indicate the DataProcess objects",
                  " that are part of the pipeline. Each object must show up in the data_processes list."
               ],
               "title": "Pipeline steps"
            },
            "start_date_time": {
               "format": "date-time",
               "title": "Start date time",
               "type": "string"
            },
            "end_date_time": {
               "format": "date-time",
               "title": "End date time",
               "type": "string"
            },
            "input_location": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "items": {
                        "type": "string"
                     },
                     "type": "array"
                  }
               ],
               "description": "Path(s) to data inputs",
               "title": "Input location"
            },
            "output_location": {
               "description": "Path to data outputs",
               "title": "Output location",
               "type": "string"
            },
            "outputs": {
               "$ref": "#/$defs/GenericModel",
               "default": {},
               "description": "Output parameters",
               "title": "Outputs"
            },
            "notes": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Notes"
            },
            "resources": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/ResourceUsage"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Process resource usage"
            }
         },
         "required": [
            "name",
            "stage",
            "experimenters",
            "code",
            "start_date_time",
            "end_date_time",
            "input_location",
            "output_location"
         ],
         "title": "DataProcess",
         "type": "object"
      },
      "GenericModel": {
         "additionalProperties": true,
         "description": "Base class for generic types that can be used in AIND schema",
         "properties": {},
         "title": "GenericModel",
         "type": "object"
      },
      "MemoryUnit": {
         "description": "Computer memory units",
         "enum": [
            "Byte",
            "Kilobyte",
            "Megabyte",
            "Gigabyte",
            "Terabyte",
            "Petabyte",
            "Exabyte"
         ],
         "title": "MemoryUnit",
         "type": "string"
      },
      "Person": {
         "additionalProperties": false,
         "description": "Person identifier",
         "properties": {
            "object_type": {
               "const": "Person",
               "default": "Person",
               "title": "Object Type",
               "type": "string"
            },
            "name": {
               "description": "First and last name OR anonymous ID",
               "title": "Person's name",
               "type": "string"
            },
            "registry": {
               "$ref": "#/$defs/_Orcid",
               "title": "Registry"
            },
            "registry_identifier": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "ORCID ID"
            }
         },
         "required": [
            "name"
         ],
         "title": "Person",
         "type": "object"
      },
      "ProcessName": {
         "description": "Process names",
         "enum": [
            "Analysis",
            "Compression",
            "Denoising",
            "Ephys curation",
            "Ephys postprocessing",
            "Ephys preprocessing",
            "Ephys visualization",
            "Fiducial segmentation",
            "File format conversion",
            "Fluorescence event detection",
            "Image atlas alignment",
            "Image background subtraction",
            "Image cell classification",
            "Image cell quantification",
            "Image cell segmentation",
            "Image cross-image alignment",
            "Image destriping",
            "Image flat-field correction",
            "Image importing",
            "Image mip visualization",
            "Image spot detection",
            "Image spot spectral unmixing",
            "Image thresholding",
            "Image tile alignment",
            "Image tile fusing",
            "Image tile projection",
            "Model evaluation",
            "Model training",
            "Neuropil subtraction",
            "Other",
            "Pipeline",
            "Simulation",
            "Skull stripping",
            "Spatial timeseries demixing",
            "Spike sorting",
            "Video ROI classification",
            "Video ROI cross session matching",
            "Video ROI segmentation",
            "Video ROI timeseries extraction",
            "Video motion correction",
            "Video plane decrosstalk",
            "dF/F estimation"
         ],
         "title": "ProcessName",
         "type": "string"
      },
      "ProcessStage": {
         "description": "Stages of processing",
         "enum": [
            "Processing",
            "Analysis"
         ],
         "title": "ProcessStage",
         "type": "string"
      },
      "ResourceTimestamped": {
         "additionalProperties": false,
         "description": "Description of resource usage at a moment in time",
         "properties": {
            "object_type": {
               "const": "Resource timestamped",
               "default": "Resource timestamped",
               "title": "Object Type",
               "type": "string"
            },
            "timestamp": {
               "format": "date-time",
               "title": "Timestamp",
               "type": "string"
            },
            "usage": {
               "title": "Usage",
               "type": "number"
            }
         },
         "required": [
            "timestamp",
            "usage"
         ],
         "title": "ResourceTimestamped",
         "type": "object"
      },
      "ResourceUsage": {
         "additionalProperties": false,
         "description": "Description of resources used by a process",
         "properties": {
            "object_type": {
               "const": "Resource usage",
               "default": "Resource usage",
               "title": "Object Type",
               "type": "string"
            },
            "os": {
               "title": "Operating system",
               "type": "string"
            },
            "architecture": {
               "title": "Architecture",
               "type": "string"
            },
            "cpu": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "CPU name"
            },
            "cpu_cores": {
               "anyOf": [
                  {
                     "type": "integer"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "CPU cores"
            },
            "gpu": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "GPU name"
            },
            "system_memory": {
               "anyOf": [
                  {
                     "type": "number"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "System memory"
            },
            "system_memory_unit": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/MemoryUnit"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "System memory unit"
            },
            "ram": {
               "anyOf": [
                  {
                     "type": "number"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "System RAM"
            },
            "ram_unit": {
               "anyOf": [
                  {
                     "$ref": "#/$defs/MemoryUnit"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "Ram unit"
            },
            "cpu_usage": {
               "anyOf": [
                  {
                     "items": {
                        "$ref": "#/$defs/ResourceTimestamped"
                     },
                     "type": "array"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "CPU usage"
            },
            "gpu_usage": {
               "anyOf": [
                  {
                     "items": {
                        "$ref": "#/$defs/ResourceTimestamped"
                     },
                     "type": "array"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "GPU usage"
            },
            "ram_usage": {
               "anyOf": [
                  {
                     "items": {
                        "$ref": "#/$defs/ResourceTimestamped"
                     },
                     "type": "array"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "title": "RAM usage"
            },
            "usage_unit": {
               "default": "percent",
               "title": "Usage unit",
               "type": "string"
            }
         },
         "required": [
            "os",
            "architecture"
         ],
         "title": "ResourceUsage",
         "type": "object"
      },
      "Software": {
         "additionalProperties": false,
         "description": "Software package identifier",
         "properties": {
            "object_type": {
               "const": "Software",
               "default": "Software",
               "title": "Object Type",
               "type": "string"
            },
            "name": {
               "description": "Name of the software package",
               "title": "Software name",
               "type": "string"
            },
            "version": {
               "anyOf": [
                  {
                     "type": "string"
                  },
                  {
                     "type": "null"
                  }
               ],
               "default": null,
               "description": "Version of the software package",
               "title": "Software version"
            }
         },
         "required": [
            "name"
         ],
         "title": "Software",
         "type": "object"
      },
      "_Orcid": {
         "additionalProperties": false,
         "description": "Model ORCID",
         "properties": {
            "name": {
               "const": "Open Researcher and Contributor ID",
               "default": "Open Researcher and Contributor ID",
               "title": "Name",
               "type": "string"
            },
            "abbreviation": {
               "const": "ORCID",
               "default": "ORCID",
               "title": "Abbreviation",
               "type": "string"
            }
         },
         "title": "_Orcid",
         "type": "object"
      }
   },
   "additionalProperties": false,
   "description": "Description of all processes run on data",
   "properties": {
      "object_type": {
         "const": "Processing",
         "default": "Processing",
         "title": "Object Type",
         "type": "string"
      },
      "describedBy": {
         "const": "https://raw.githubusercontent.com/AllenNeuralDynamics/aind-data-schema/main/src/aind_data_schema/core/processing.py",
         "default": "https://raw.githubusercontent.com/AllenNeuralDynamics/aind-data-schema/main/src/aind_data_schema/core/processing.py",
         "title": "Describedby",
         "type": "string"
      },
      "schema_version": {
         "const": "2.0.34",
         "default": "2.0.34",
         "title": "Schema Version",
         "type": "string"
      },
      "data_processes": {
         "items": {
            "$ref": "#/$defs/DataProcess"
         },
         "title": "Data processing",
         "type": "array"
      },
      "notes": {
         "anyOf": [
            {
               "type": "string"
            },
            {
               "type": "null"
            }
         ],
         "default": null,
         "title": "Notes"
      }
   },
   "required": [
      "data_processes"
   ],
   "title": "Processing",
   "type": "object"
}